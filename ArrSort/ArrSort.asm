@R1
D=M
@arr_addr
M=D
@R2
D=M
@n
M=D
D=D-1
@i
M=D
(OUTER_LOOP)
@i
D=M
@END
D;JLE
@j
M=0
(INNER_LOOP)
@j
D=M
@i
D=D-M
@NEXT_PASS
D;JGE
@arr_addr
D=M
@j
A=D+M
D=M
@val_j
M=D
A=A+1
D=M
@val_j
D=M-D
@CONTINUE_INNER_LOOP
D;JLE
@arr_addr
D=M
@j
A=D+M
D=A
@addr_j
M=D
A=A+1
D=M
@val_j_plus_1
M=D
@addr_j
A=M
M=D
@val_j
D=M
@addr_j
A=M+1
M=D
(CONTINUE_INNER_LOOP)
@j
M=M+1
@INNER_LOOP
0;JMP
(NEXT_PASS)
@i
M=M-1
@OUTER_LOOP
0;JMP
(END)
@R0
M=-1
(HALT)
@HALT
0;JMP

